<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Регистрация</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap');
    @import url('https://fonts.cdnfonts.com/css/libertinus-math');

    
    body {
      font-family: 'Manrope', sans-serif;
      text-align: center; 
      color: #FFFFFF;
      background: #001137;
      max-width: 400px;
      margin: 0 auto;
    }
    #reg {
      font-family: 'Libertinus Math', sans-serif;
      font-size: 250%;
    }

    form {
      margin-left: 20px;
      margin-right: 20px;
    }
    input[type="text"], textarea, select, input[type="checkbox"], #additionalText {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      box-sizing: border-box;
      color: #FFFFFF;
      border-radius: 6px;
    }
    input, textarea, #choice {
      background-color: #00184d;
      border-width: 1px;
    }
    #choice {
      font-family: 'Manrope';
    }
    label {
      display: block; 
      /* font-weight: bold; Жирный шрифт */
      text-align: left; 
      margin-bottom: 5px; 
    }
    input[type="submit"] {
      background-color: #00184d;
      color: white;
      padding: 15px 20px;
      border: 1px solid;
      border-radius: 8px;
      cursor: pointer;
      height: 60px;
      width: 60%;
      font-size: 110%;
    }
    input[type="submit"]:hover {
      background-color: #002066;
    }
    input[type="number"], input[type="email"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      box-sizing: border-box;
      border-radius: 6px;
      color: #FFFFFF;
    }
    .buttons {
      display: none; /* flex */ 
      justify-content: space-between; 
      flex-wrap: wrap; 
      max-width: 400px; 
      margin: 0 auto; 
      padding: 0; 
      box-sizing: border-box; 
    }
  
    .buttons button {
      flex: 1; 
      margin: 5px; 
      white-space: normal; 
      height: 40px;
      display: flex; 
      align-items: center; 
      justify-content: center; 
      text-align: center; 
      font-size: 14px; 
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
      border-radius: 8px;
      border: none;
    }

    .buttons button:hover {
      background-color: #45a049;
    }

    .checkbox-container {
      display: flex;
      align-items: center;
      padding-bottom: 15px;
      padding-top:15px;
      padding-right: 5px;
    }

    .checkbox-container input[type="checkbox"] {
      flex: 0 0 20%; /* Занимает 20% от ширины блока */
    }

    .checkbox-container label {
      flex-grow: 1; /* Занимает оставшуюся ширину блока */
    }

    #additionalText {
      text-align: left;
      color: #FFFFFF;
      font-size: 80%;
      line-height: 140%;
    }

    select {
      -webkit-appearance: none; 
      appearance: none;
      background-color: #00184d;
      color: #FFFFFF;
      padding: 10px;
      border-radius: 6px; 
      background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAACJ0lEQVR4nKVVO44aQRCdaIQEJF4TQIDE8JW83rVExE1AkJBwAX4H4BQka+OIr+AGRBBxAAe2JQKi3Q02A8ToWa93erY9wwxoKKlEq7vmPbqq+pWmeRiAbwAGAF7hba9WzKMXzjngzwB+AjB9gJ1mWkR3l8C/AvgrvzocDhgOh6hUKsjn8wiHw8K55t5oNBIxiv0BcO8H/iYjp9MpDMMAj/w8nU5jNpupJG8uEist4p+fTic0m82LwJrDW60WTNNUb/KRLivnwoKAa5Z3Oh31Jj8k+KMsKNMSFFyzfD6fq4V/0Kzqi2Ixn7cSpFIptfDfNdnn7JZbwTXLx+OxJHghgbByuewKHAwGCIVCnkC6rqPf77v2q9WqXQibIJvNugJpm80GyWTSdZZIJLBer99BHGd8Jy6CaDTqCtzv9+Jst9uhVCrZ+1xzj8YY53fEuoqgXq/bBeNvo9EQru4x5iqCXC53Ns/FYhHb7Vbt77O3Ur1QKLgJqC1exYzFYlgul/ZHq9UK8XjcM75Wq/1HINqUwuXXerquo9frCefaL3YymUj8Z/uhHY9HZDKZm9+AYRiuh2ZLBVXxVoLFYiHBT1RoqUfiFjSqYlDwbrer9sHTWbmm5Lbb7UBKan7I9W8An5wz4V4dOFTFa2rCGCUtsDC+eE01vvFfMpKFp3BRW9jbkUhEONfcY7cwRjHvkamQ3LH6AYb+08Wh7yB64FSi5PoAP1t/5r1bztg/XZZ/pwOOAkUAAAAASUVORK5CYII=');
      background-position: right 10px center;
      background-repeat: no-repeat;
      background-size: 3%;
    }

    #registrationForm {
      display: block;
    }

    #successMessage {
      display: none;
    }

    #error {
      color: #e60000;
      padding: 10px;
    }

    .shake-animation {
      animation-duration: 0.2s;
      animation-name: shake;
      animation-iteration-count: infinite;
      animation-timing-function: ease-in-out;  
      animation-iteration-count: 1;   
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-3px); }
      50% { transform: translateX(3px); }
      75% { transform: translateX(-3px); }
      100% { transform: translateX(3px); }
    }



  </style>
</head>
<body>
  <div id="usercard"> </div>
  <div class="buttons">
    <button onclick="window.location.href='расписание.html'">Расписание</button>
    <button onclick="window.location.href='залы.html'">Залы</button>
    <button onclick="window.location.href='пожертвовать.html'">Пожертвовать</button>
    <button onclick="window.location.href='партнеры.html'">Партнеры</button>
  </div>

  <h2 id="reg">Регистрация</h2>

  <div id="successMessage"><p>Вы успешно зарегистрированы.</p></div>

  <form id="registrationForm">
    <label for="choice">Выберите дату посещения:</label>
    <select id="choice" name="choice">
      <option value="" disabled selected hidden>Выберите дату</option>
      <option value="option1">6 мая</option>
      <option value="option2">7 мая</option>
      <option value="option3">Оба дня</option>
    </select>

    <div id="additionalText">
      <!-- Здесь будет отображаться текстовая информация -->
    </div>

    <label for="name">ФИО:</label>
    <input type="text" id="name" name="name" required>

    <label for="passport">Паспортные данные: серия, номер, кем и когда выдан</label>
    <textarea rows="4" id="passport" name="passport" required></textarea>

    <label for="email">Электронная почта:</label>
    <input type="email" id="email" name="email" required>

    <label for="city">Город проживания:</label>
    <input type="text" id="city" name="city" required>

    <label for="company">Название организации, которую представляете:</label>
    <input type="text" id="company" name="company" required>

    <label for="purpose">Цель посещения форума:</label>
    <textarea rows="3" id="purpose" name="purpose" required></textarea>

    <div class="checkbox-container">
    <input type="checkbox" id="media" name="media">
    <label for="media">Представляю СМИ</label>
    </div>

    <div id="mediaFields" style="display: none;">
    <label for="mediaEquip">Оборудование:</label>
    <input type="text" id="mediaEquip" name="mediaEquip">
    </div>

    <div class="checkbox-container">
  <input type="checkbox" id="agree" name="agree" required>
  <label for="agree">Согласие на обработку персональных данных (в соответствии с Федеральным законом от 27.07.2006 N 152-ФЗ (ред. от 06.02.2023) "О персональных данных")</label>
</div>
    <div id='error'></div>
    <input type="submit" id="signUp" name="signUp" value="Оставить заявку">
  </form>

<script>
      var schedule6may = "<b>09:00-10:00</b> Регистрация участников Форума<br><br><b>10:00-12:20</b> Пленарное заседание «Год семьи. Партнерство государства и общества.»<br><i>Локация: Конференц зал, 1 этаж</i> <br><br><b>12:20-13:00</b> Кофе-брейк<br><i>Локация: Лекторий, 3 этаж</i><br><br><b>13:00-13:45</b> Интервью с психологом (Дарья Алексеевна Ерёмина, доктор психологических наук, доцент кафедры медицинской психологии и психофизиологии СПбГУ, клинический психолог)<br><i>Локация: Конференц зал</i><br><br><b>14:00-15:30</b> Панельная сессия «Воспитание через слово»<br><i>Модератор: Директор Благотворительного Фонда «Команда страны» Суворова А.А.<br>Локация: Конференц зал, 1 этаж</i><br><br><b>14:00-15:30</b> Панельная сессия «Семья и социальная справедливость. Механизмы поддержки семей»<br><i>Модератор: Председатель экспертного совета по добровольчеству и добрым делам Будяк А.А., Руководитель социально-культурных проектов Каргополова Ю.С.<br>Локация: Лекторий, 3 этаж</i><br><br><b>16:00-17:00</b> Экскурсионная программа по музею Христианской культуры <br><i>(запись на экскурсию до 15:30 на 1 этаже в зоне регистрации участников)</i><br><br><b>17:30-18:00</b> Подведение итогов первого дня форума<br><i>Локация: Конференц зал, 1 этаж</i><br><br>";
      var schedule7may = "<b>10:00-11:00</b> Аккредитация участников Форума <br><br><b>11:00-12:00</b> Интервью с историком (Владимир Александрович Носов, историк, конфликтолог, специалист по работе с молодежью СПб ГБУ Дом молодежи «Форпост»)<br><i>Локация: Конференц зал, 1 этаж</i><br><br><b>12:00-13:30</b> Круглый стол «Здоровая нация как залог будущего страны»<br><i>Модератор: Модератор: Председатель правления АНО «Команда страны» Бубнов Д.В.<br>Локация: Стеклянный зал, 8 этаж</i><br><br><b>12:00-13:30</b> Панельная дискуссия «Традиционные российские духовно-нравственные ценности как основа стратегии национальной безопасности»<br><i>Модераторы: Председатель экспертного совета по духовно-нравственному просвещению и связям с Русской Православной Церковью Шевчук В.А., Член правления АНО «Команда страны» Егорова А.Ю.<br>Локация: Конференц зал, 1 этаж</i><br><br><b>13:30-15:00</b> Кофе-брейк<br><i>Локация: Ресторан МФК «Наследие»</i><br><br><b>15:00-15:10</b> Подписание соглашения между МФК «Наследие», АНО «Команда страны» и АНО «Институт Регионального и Муниципального Развития»<br><i>Локация: Музей Христианской культуры</i><br><br><b>15:10-16:00</b> Презентация фильма<br><i>Локация: Конференц зал, 1 этаж</i><br><br><b>16:00-17:00 </b>Подведение итогов форума<br><i>Локация: Конференц зал, 1 этаж</i><br><br><b>17:00-18:00</b> Экскурсионная программа по музею Христианской культуры<br><i>(запись на экскурсию до 15:30 на 1 этаже в зоне регистрации участников)</i><br><br><br>";
      var scheduleBothDays = "<b><u>Расписание 6 мая:</b></u><br><br>" + schedule6may + "<br><b><u>Расписание 7 мая:</b></u><br><br>" + schedule7may;
    document.getElementById("choice").addEventListener("change", function() {
      var choice = this.value;
      var additionalText = document.getElementById("additionalText");

      if (choice === "option1") {
      additionalText.innerHTML = schedule6may;
      additionalText.style.display = "block"; // Показываем дополнительный текст
    } else if (choice === "option2") {
      additionalText.innerHTML = schedule7may;
      additionalText.style.display = "block"; // Показываем дополнительный текст
    } else if (choice === "option3") {
      additionalText.innerHTML = scheduleBothDays;
      additionalText.style.display = "block"; // Показываем дополнительный текст
    } else {
      additionalText.innerHTML = ""; // Очищаем содержимое дополнительного текста
      additionalText.style.display = "none"; // Скрываем дополнительный текст
    }
  });

    document.addEventListener('click', function(e) {
  if (!e.target.matches('input, select, textarea, button')) {
    if (document.activeElement && document.activeElement.blur) {
      document.activeElement.blur();
    }
  }
});

    document.getElementById("media").addEventListener("change", function() {
  var mediaFields = document.getElementById("mediaFields");

  if (this.checked) {
    mediaFields.style.display = "block";
  } else {
    mediaFields.style.display = "none";
  }
});

</script>

<script>

  let tg = window.Telegram.WebApp;
  tg.expand();

  let signUp = document.getElementById("signUp");

  const error = document.getElementById('error');

  signUp.addEventListener('click', (event) => {
    event.preventDefault();

    var choice = document.getElementById("choice").value;
    var name = document.getElementById("name").value;
    var passport = document.getElementById("passport").value;
    var email = document.getElementById("email").value;
    var city = document.getElementById("city").value;
    var company = document.getElementById("company").value;
    var purpose = document.getElementById("purpose").value;
    var agree = document.getElementById("agree");
    var media = document.getElementById("media").checked;
    var mediaEquip = document.getElementById("mediaEquip").value;

    if (choice === "option1" || choice === "option2" || choice === "option3") { // если выбрана дата
        if (name === '' || passport === '' || email === '' || city === '' || company === '' || purpose === '' || !agree.checked) {
         // если где-то не заполнено поле
          document.getElementById('error').innerText = "Заполните все поля";
          error.classList.add("shake-animation");
          error.addEventListener('animationend', () => {
             error.classList.remove("shake-animation");
          });
          return;
          } 
        else {
        // если всё заполнено
          let agreeValue = agree.checked;
          let data = {
            date: choice,
            name: name,
            passport: passport,
            email: email,
            city: city,
            company: company,
            purpose: purpose,
            agree: agreeValue
          }
          if (media) {
            data.mediaEquip = mediaEquip
          }
          tg.sendData(JSON.stringify(data))


          document.getElementById("registrationForm").style.display = "none";
          document.getElementById("successMessage").style.display = "block";
        }
    }
    else {
      // если не выбрана дата
       document.getElementById('error').innerText = "Выберите дату";
       error.classList.add("shake-animation");
       error.addEventListener('animationend', () => {
        error.classList.remove("shake-animation");
       });
       return;
      }
     
  });

</script>

</body>
</html>
